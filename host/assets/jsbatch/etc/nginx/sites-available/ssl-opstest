#
# SSL uwsapi-test
#
server {
	listen 443 ssl;
	listen [::]:443 ssl;

	server_name opstest.uws.talkingpts.org;
	server_tokens off;

	root /srv/www/ssl;

	ssl_certificate /srv/acme/cert/opstest.uws.talkingpts.org.crt;
	ssl_certificate_key /srv/acme/key/opstest.uws.talkingpts.org.key;

	include /srv/etc/nginx/ssl.conf;

	access_log /var/log/nginx/opstest_access.log ssluser;
	error_log /var/log/nginx/opstest_error.log;

	include /srv/etc/nginx/opstest-verify-client.conf;

	location /api/ {
		include /srv/etc/nginx/uws-cache.conf;
		proxy_pass http://127.0.0.1:5610/api/;
		include /etc/nginx/proxy_params;
	}

	location /web/ {
		include /srv/etc/nginx/uws-cache.conf;
		proxy_pass http://127.0.0.1:5510/web/;
		include /etc/nginx/proxy_params;
	}
}
