#!/bin/sh
set -eu
cmd=${1:-''}

bindir=$(dirname $0)

show_help() {
	echo 'uws command line interface'
	echo
	echo 'available commands:'
	echo
	grep -E '^__doc__' ${bindir}/* | sed "s/'//g" | sed "s/^${bindir}\//  /" |
		sed "s/__doc__ =//" | sed 's/:/ -/'
	echo
	echo 'run `uwshelp cmd` to get more information about cmd usage'
}

cmd_help() {
	local cmd=${1}
	if ! test -x ${bindir}/${cmd}; then
		echo "help for ${cmd} error: invalid command" >&2
		exit 1
	fi
	exec ${bindir}/${cmd} --help
}

if test "X${cmd}" = 'X'; then
	show_help
else
	cmd_help ${cmd}
fi
exit 0
