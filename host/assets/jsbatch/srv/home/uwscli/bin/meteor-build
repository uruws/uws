#!/bin/sh
set -eu

case $1 in
	-h|--help)
		exec uwshelp meteor-build
	;;
esac

target=""
if test "X${1}" = 'X--beta'; then
	shift
	target="beta"
fi

test_flags=""
if test "X${1}" = 'X--no-test'; then
	shift
	test_flags='--no-test'
fi

release=${1:?'app release?'}
shift

uwsnq /srv/deploy/Buildpack/build.sh ${release} ${target} ${test_flags}

exit 0

#uwscli:meteor-build			- build meteor app version/tag

#uwsdoc:meteor-build [--beta] [--no-test] X.Y.Z
#uwsdoc:
#uwsdoc:Build meteor app from X.Y.Z git tag.
#uwsdoc:
#uwsdoc:  --beta    - build a beta release.
#uwsdoc:  --no-test - do not run app tests.
