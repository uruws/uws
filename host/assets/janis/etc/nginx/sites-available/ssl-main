#
# SSL proxy cache
#
#~ proxy_cache_path /srv/cache/nginx/uws levels=1:2 keys_zone=uwscache:10m
	#~ inactive=30m use_temp_path=off;

#
# SSL main domain
#
server {
	listen 443 ssl default_server;
	listen [::]:443 ssl default_server;

	server_name uws.talkingpts.org;
	server_tokens off;

	root /var/www/html;

	ssl_certificate /srv/acme/cert/uws.talkingpts.org.crt;
	ssl_certificate_key /srv/acme/key/uws.talkingpts.org.key;

	include /srv/etc/nginx/ssl.conf;

	# add HSTS header again to includeSubDomains
	add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

	#~ location / {
		#~ proxy_cache uwscache;
		#~ proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;
		#~ proxy_cache_min_uses 3;
		#~ proxy_cache_revalidate on;
		#~ proxy_cache_lock on;
		#~ proxy_pass http://127.0.0.1:8000/;
		#~ include /etc/nginx/proxy_params;
	#~ }
}
